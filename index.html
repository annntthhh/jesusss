<script>
        const envelope = document.querySelector('.envelope');
        const music = document.getElementById('background-music');
        const fallingStarsContainer = document.getElementById('falling-stars-container'); 
        let musicPlayed = false;
        let starsGenerated = false; 

        // Abre el sobre al pasar el mouse por encima (hover)
        envelope.addEventListener('mouseenter', function() {
            envelope.classList.add('open');
            
            if (!musicPlayed) {
                music.play().catch(error => {
                    console.log("Música bloqueada por el navegador. Se necesita un clic.", error);
                });
                musicPlayed = true;
            }

            // NUEVO: Generar las estrellitas al abrir el sobre
            if (!starsGenerated) {
                generateFallingStars();
                starsGenerated = true; 
            }
        });
        
        // CÓDIGO OPCIONAL: Permite que la música inicie si hacen clic en CUALQUIER PARTE de la página
        document.addEventListener('click', () => {
            if (!musicPlayed) {
                music.play().catch(error => {});
                musicPlayed = true;
            }
        }, { once: true });


        // Función para crear y animar corazones al hacer clic
        document.addEventListener('click', function(e) {
            const clickHeart = document.createElement('span');
            clickHeart.classList.add('click-heart');
            clickHeart.textContent = '❤️'; 
            
            clickHeart.style.zIndex = '99999'; 
            clickHeart.style.position = 'absolute';
            
            clickHeart.style.left = e.clientX + 'px';
            clickHeart.style.top = e.clientY + 'px';
            document.body.appendChild(clickHeart);

            clickHeart.addEventListener('animationend', () => {
                clickHeart.remove();
            });
        });

        // REVISADO: Función para generar y animar las estrellitas que caen
        function generateFallingStars() {
            const numberOfStars = 30; // Cuántas estrellas caerán
            
            // Usamos las dimensiones de la ventana para que las estrellas caigan por toda la pantalla
            const containerWidth = window.innerWidth;

            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('span');
                star.classList.add('falling-star');
                star.textContent = '✦'; 
                
                // Posicionamos la estrella aleatoriamente a lo ancho de la pantalla
                star.style.left = Math.random() * containerWidth + 'px';
                star.style.animationDelay = Math.random() * 1.5 + 's'; 
                star.style.animationDuration = (Math.random() * 1.5 + 2) + 's'; 
                star.style.fontSize = (Math.random() * 10 + 10) + 'px'; // Tamaño aleatorio
                
                // Agregamos el contenedor al body para asegurar la visibilidad
                document.body.appendChild(star); 

                // Eliminamos la estrella después de su animación
                star.addEventListener('animationend', () => {
                    star.remove();
                });
            }
        }
    </script>
</body>
</html>
