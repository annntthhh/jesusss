/* --- NUEVO DISEÑO: ÍNDIGO PROFUNDO Y PLATA --- */

:root{
  --bg: #121212;            /* Negro profundo para el fondo de la página */
  --envelope: #2c3e50;      /* Azul Índigo oscuro para el cuerpo del sobre */
  --accent: #1abc9c;        /* Turquesa Oscuro (para acentos y botones) */
  --shadow: rgba(0,0,0,0.4); /* Sombra más fuerte */
  --text: #ecf0f1;          /* Texto Blanco/Gris Claro */
}

/* básico */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  /* Cambio de fuente a una más moderna y limpia */
  font-family: 'Roboto', 'Helvetica Neue', Arial, sans-serif; 
  background:var(--bg);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:32px;
}

/* contenedor */
.stage{ text-align:center; max-width:520px; width:100%; }

/* SOBRE: estructura más realista */
.envelope{
  position:relative;
  width:380px;
  height:280px;
  perspective:1200px;
  margin:0 auto 12px;
}

/* solapa superior (triangular) */
.envelope .flap{
  position:absolute;
  left:20px;
  right:20px;
  top:0;
  height:140px;
  /* Degradado sutil con el color del sobre */
  background: linear-gradient(180deg, #34495e, var(--envelope));
  border-radius:10px;
  transform-origin:top center;
  transform:rotateX(0deg);
  transition:transform 700ms cubic-bezier(.2,.9,.2,1);
  box-shadow: 0 18px 40px var(--shadow);
  z-index:3;
  clip-path: polygon(0 0, 100% 0, 50% 75%);
}

/* cuerpo del sobre (borde y efecto 3D) */
.envelope .body{
  position:absolute;
  left:8px;
  right:8px;
  top:74px;
  bottom:12px;
  border-radius:12px;
  perspective:800px;
  transform-style:preserve-3d;
  z-index:1;
}

/* tarjeta interior con estampado de corazones (cambio de color) */
.envelope .card{
  position:absolute;
  left:8px;
  right:8px;
  top:0;
  bottom:0;
  /* La tarjeta interior es gris claro para alto contraste */
  background-color: #ecf0f1; 
  border-radius:12px;
  padding:32px 24px;
  box-shadow: 0 18px 46px rgba(0,0,0,0.1);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transform:translateY(0);
  transition:transform 420ms ease, opacity 300ms ease;
  z-index:2;
  /* patrón de corazones más discreto (color de fondo de la tarjeta) */
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24'><path fill='%23bdc3c7' fill-opacity='0.16' d='M12 21s-6.716-4.35-9.094-7.044C0.833 11.8 2.172 7 6 7c1.927 0 3.02 1.23 3.894 2.06C10.98 8.23 12.073 7 14 7c3.828 0 5.167 4.8 3.094 6.956C18.716 16.65 12 21 12 21z'/></svg>");
  background-repeat: repeat;
  background-size: 48px 48px;
}

/* encabezado y mensaje */
.envelope h1{
  margin:0 0 10px;
  font-size:24px; /* Un poco más grande */
  color:var(--accent); /* Color de acento turquesa */
  letter-spacing:1px; /* Más espaciado para un look moderno */
}
.message{
  margin:0 0 14px;
  font-size:18px;
  opacity:0;
  transform:translateY(12px) scale(0.99);
  transition:opacity 420ms ease 180ms, transform 420ms ease 180ms;
  color: #333; /* Texto oscuro sobre el fondo claro de la tarjeta */
  text-align:center;
  white-space:pre-wrap;
  word-break:break-word;
  line-height:1.4; /* Más espacio entre líneas */
}

/* pequeño brillo y corazón flotante (ajustado para fondo oscuro) */
.envelope::after{
  content:'';
  position:absolute;
  right:18px;
  top:18px;
  width:48px;
  height:48px;
  /* El brillo ahora es un corazón simple que contrasta */
  background-color: #e74c3c; /* Pequeño corazón rojo discreto */
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
  z-index:4;
}

/* botones */
.controls{ display:flex; gap:10px; align-items:center; justify-content:center; }
.open-btn, .music-btn{
  border:0;
  background:var(--accent);
  color:var(--bg); /* Texto oscuro sobre el botón de acento */
  padding:10px 18px; /* Botones más grandes */
  border-radius:4px; /* Bordes más rectos para un look moderno */
  cursor:pointer;
  font-weight:700;
  box-shadow: 0 6px 14px rgba(0,0,0,0.2);
  transition: background-color 0.3s ease;
}

.open-btn:hover, .music-btn:hover {
    background: #16a085; /* Un tono más oscuro de Turquesa al pasar el mouse */
}

/* estado abierto (solapa gira y carta sube) */
.envelope.open .flap{ transform: rotateX(-180deg); }
.envelope.open .card{ transform: translateY(-22px); }
.envelope.open .message{ opacity:1; transform:translateY(0) scale(1); }

/* pista y responsive */
.hint{ margin-top:12px; color:#95a5a6; font-size:14px; }
@media (max-width:520px){
  .envelope{ width:94%; height:240px; }
  .message{ font-size:16px; }
}
